### Variables
@baseUrl = https://localhost:8443
@contentType = application/json

###
# IMPORTANT: You need to login first to get an auth token
# Run auth-https.http to register/login and get a token
# The token will be automatically stored in {{authToken}}
###

### Create a new item - Blue Denim Jeans
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Blue Denim Jeans",
  "description": "Comfortable slim-fit jeans perfect for casual wear",
  "category": "BOTTOMS",
  "color": "Blue",
  "brand": "Levi's",
  "size": "32",
  "washingTemperature": 40,
  "canBeIroned": true,
  "canBeTumbleDried": false,
  "canBeDryCleaned": false,
  "canBeBleached": false,
  "imageUrl": "https://example.com/images/blue-jeans.jpg"
}

> {%
  client.test("Create item successful", function () {
    client.assert(response.status === 201, "Response status is not 201");
    if (response.body && response.body.id) {
      client.global.set("itemId", response.body.id);
      client.log("Item created with id: " + response.body.id);
    }
  });
%}

### Create another item - White T-Shirt
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "White Cotton T-Shirt",
  "description": "Classic white t-shirt, 100% cotton",
  "category": "TOPS",
  "color": "White",
  "brand": "H&M",
  "size": "M",
  "washingTemperature": 30,
  "canBeIroned": true,
  "canBeTumbleDried": true,
  "canBeDryCleaned": false,
  "canBeBleached": true
}

> {%
  client.test("Create item successful", function () {
    client.assert(response.status === 201, "Response status is not 201");
    if (response.body && response.body.id) {
      client.global.set("itemId2", response.body.id);
      client.log("Item created with id: " + response.body.id);
    }
  });
%}

### Create item - Black Leather Jacket
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Black Leather Jacket",
  "description": "Genuine leather motorcycle jacket",
  "category": "OUTERWEAR",
  "color": "Black",
  "brand": "Zara",
  "size": "L",
  "washingTemperature": null,
  "canBeIroned": false,
  "canBeTumbleDried": false,
  "canBeDryCleaned": true,
  "canBeBleached": false,
  "imageUrl": "https://example.com/images/leather-jacket.jpg"
}

> {%
  client.test("Create item successful", function () {
    client.assert(response.status === 201, "Response status is not 201");
  });
%}

### Create item - Red Summer Dress
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Red Summer Dress",
  "description": "Floral print summer dress",
  "category": "DRESSES",
  "color": "Red",
  "brand": "Mango",
  "size": "S",
  "washingTemperature": 30,
  "canBeIroned": true,
  "canBeTumbleDried": false,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Create item successful", function () {
    client.assert(response.status === 201, "Response status is not 201");
  });
%}

### Create item - Running Shoes
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Nike Running Shoes",
  "description": "Lightweight running shoes with good cushioning",
  "category": "SHOES",
  "color": "Grey",
  "brand": "Nike",
  "size": "42",
  "washingTemperature": 30,
  "canBeIroned": false,
  "canBeTumbleDried": false,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Create item successful", function () {
    client.assert(response.status === 201, "Response status is not 201");
  });
%}

### Get all items
GET {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get all items successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
    if (response.body) {
      client.assert(Array.isArray(response.body), "Response should be an array");
      client.log("Total items: " + response.body.length);
    }
  });
%}

### Get items by category - TOPS
GET {{baseUrl}}/api/items?category=TOPS
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get items by category successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
    if (response.body) {
      client.assert(Array.isArray(response.body), "Response should be an array");
      client.log("TOPS items: " + response.body.length);
    }
  });
%}

### Get items by category - BOTTOMS
GET {{baseUrl}}/api/items?category=BOTTOMS
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get items by category successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
  });
%}

### Get items by category - OUTERWEAR
GET {{baseUrl}}/api/items?category=OUTERWEAR
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get items by category successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
  });
%}

### Get specific item by ID
GET {{baseUrl}}/api/items/{{itemId}}
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get item by ID successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
    if (response.body) {
      client.assert(response.body.id, "Item should have an id");
      client.assert(response.body.name, "Item should have a name");
      client.log("Item: " + response.body.name);
    }
  });
%}

### Update item
PUT {{baseUrl}}/api/items/{{itemId}}
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Blue Denim Jeans - Updated",
  "description": "Comfortable slim-fit jeans - now with updated description",
  "category": "BOTTOMS",
  "color": "Dark Blue",
  "brand": "Levi's",
  "size": "32",
  "washingTemperature": 40,
  "canBeIroned": true,
  "canBeTumbleDried": false,
  "canBeDryCleaned": false,
  "canBeBleached": false,
  "imageUrl": "https://example.com/images/blue-jeans-updated.jpg"
}

> {%
  client.test("Update item successful", function () {
    client.assert(response.status === 200, "Response status is not 200");
    if (response.body) {
      client.assert(response.body.name === "Blue Denim Jeans - Updated", "Name should be updated");
      client.log("Item updated: " + response.body.name);
    }
  });
%}

### Delete item
DELETE {{baseUrl}}/api/items/{{itemId}}
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Delete item successful", function () {
    client.assert(response.status === 204, "Response status is not 204");
    client.log("Item deleted successfully");
  });
%}

###
# Error Cases
###

### Test create item without authentication (should fail with 401)
POST {{baseUrl}}/api/items
Content-Type: {{contentType}}

{
  "name": "Unauthorized Item",
  "description": "This should fail",
  "category": "TOPS",
  "color": "Red",
  "brand": "Test",
  "size": "M",
  "washingTemperature": 30,
  "canBeIroned": true,
  "canBeTumbleDried": true,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Create without auth should fail", function () {
    client.assert(response.status === 401, "Expected unauthorized status");
  });
%}

### Test create item with missing required fields (should fail with 400)
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "description": "Missing name and category",
  "color": "Blue"
}

> {%
  client.test("Create with missing fields should fail", function () {
    client.assert(response.status === 400, "Expected bad request status");
  });
%}

### Test create item with invalid category (should fail with 400)
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Invalid Category Item",
  "description": "This has an invalid category",
  "category": "INVALID_CATEGORY",
  "color": "Blue",
  "brand": "Test",
  "size": "M",
  "washingTemperature": 30,
  "canBeIroned": true,
  "canBeTumbleDried": true,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Create with invalid category should fail", function () {
    client.assert(response.status === 400, "Expected bad request status");
  });
%}

### Test create item with invalid washing temperature (should fail with 400)
POST {{baseUrl}}/api/items
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Invalid Temperature Item",
  "description": "Temperature too high",
  "category": "TOPS",
  "color": "Blue",
  "brand": "Test",
  "size": "M",
  "washingTemperature": 150,
  "canBeIroned": true,
  "canBeTumbleDried": true,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Create with invalid temperature should fail", function () {
    client.assert(response.status === 400, "Expected bad request status");
  });
%}

### Test get non-existent item (should fail with 404)
GET {{baseUrl}}/api/items/nonexistentitemid123456
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Get non-existent item should fail", function () {
    client.assert(response.status === 404, "Expected not found status");
  });
%}

### Test update non-existent item (should fail with 404)
PUT {{baseUrl}}/api/items/nonexistentitemid123456
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "name": "Updated Name",
  "description": "Updated description",
  "category": "TOPS",
  "color": "Blue",
  "brand": "Test",
  "size": "M",
  "washingTemperature": 30,
  "canBeIroned": true,
  "canBeTumbleDried": true,
  "canBeDryCleaned": false,
  "canBeBleached": false
}

> {%
  client.test("Update non-existent item should fail", function () {
    client.assert(response.status === 404, "Expected not found status");
  });
%}

### Test delete non-existent item (should fail with 404)
DELETE {{baseUrl}}/api/items/nonexistentitemid123456
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
  client.test("Delete non-existent item should fail", function () {
    client.assert(response.status === 404, "Expected not found status");
  });
%}

###
# Available Categories:
# - TOPS (shirts, t-shirts, blouses)
# - BOTTOMS (pants, jeans, shorts, skirts)
# - DRESSES (dresses, jumpsuits)
# - OUTERWEAR (jackets, coats)
# - SHOES (all footwear)
# - ACCESSORIES (bags, belts, jewelry)
# - UNDERWEAR (underwear, socks)
# - SPORTSWEAR (athletic wear)
# - SLEEPWEAR (pajamas, nightgowns)
# - FORMAL (suits, formal wear)
# - OTHER (anything else)
###

###
# Valid washing temperatures: 0-95Â°C
# Set to null if item cannot be washed
###

